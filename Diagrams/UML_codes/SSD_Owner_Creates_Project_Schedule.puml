@startuml
title System Sequence Diagram - Owner Creates Project Schedule

actor Owner
participant ":System" as System

Owner -> System : getProject(projectIdentifier)
note right
    **projectInfo contains:**
    - projectIdentifier: String
    - projectName: String
    - projectDescription: String
    - status: ProjectStatus
    - lotIdentifiers: List<String>
    - progressPercentage: Integer
end note
System --> Owner : projectInfo

Owner -> System : initiateScheduleCreation(projectIdentifier)
note right
    **scheduleForm contains:**
    - scheduleStartDate: LocalDate
    - scheduleEndDate: LocalDate
    - scheduleDescription: String
    - lotId: String
end note
System --> Owner : scheduleForm

Owner -> System : submitSchedule(scheduleRequestDTO)

alt Schedule Created Successfully
    System --> Owner : scheduleResponseDTO
    
    loop Add Tasks to Schedule
        Owner -> System : createTask(taskRequestDTO, scheduleIdentifier)
        note right
            **taskRequestDTO contains:**
            - taskTitle: String
            - taskDescription: String
            - periodStart: LocalDate
            - periodEnd: LocalDate
            - taskStatus: TaskStatus
            - taskPriority: TaskPriority
            - estimatedHours: Integer
            - assignedToUserId: String
        end note
        
        alt Task Created Successfully
            System --> Owner : taskResponseDTO
        else Task Validation Error
            System --> Owner : validationError(errorMessage)
            Owner -> System : correctTaskData(taskRequestDTO)
            System --> Owner : taskResponseDTO
        end
    end
    
    opt View Created Schedule
        Owner -> System : getSchedule(scheduleIdentifier)
        System --> Owner : scheduleResponseDTO
    end
    
else Schedule Validation Error
    System --> Owner : validationError(errorMessage)
    Owner -> System : correctScheduleData(scheduleRequestDTO)
    System --> Owner : scheduleResponseDTO
end

@enduml
