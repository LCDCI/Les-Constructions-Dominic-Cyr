@startuml
title DLCD for Owner Creates Project Schedule

class ScheduleController {
    - scheduleService: ScheduleService
    + createOwnerSchedule(scheduleRequestDTO: ScheduleRequestDTO): ResponseEntity<ScheduleResponseDTO>
    + getOwnerScheduleByIdentifier(scheduleIdentifier: String): ResponseEntity<ScheduleResponseDTO>
    + updateOwnerSchedule(scheduleIdentifier: String, scheduleRequestDTO: ScheduleRequestDTO): ResponseEntity<ScheduleResponseDTO>
    + deleteOwnerSchedule(scheduleIdentifier: String): ResponseEntity<Void>
    + getOwnerAllSchedules(): ResponseEntity<List<ScheduleResponseDTO>>
}

interface ScheduleService {
    + addSchedule(scheduleRequestDTO: ScheduleRequestDTO): ScheduleResponseDTO
    + getScheduleByIdentifier(scheduleIdentifier: String): ScheduleResponseDTO
    + updateSchedule(scheduleIdentifier: String, scheduleRequestDTO: ScheduleRequestDTO): ScheduleResponseDTO
    + deleteSchedule(scheduleIdentifier: String): void
    + getAllSchedules(): List<ScheduleResponseDTO>
}

class ScheduleServiceImpl implements ScheduleService {
    - scheduleRepository: ScheduleRepository
    - projectRepository: ProjectRepository
    - lotRepository: LotRepository
    - scheduleMapper: ScheduleMapper
}

class ScheduleMapper {
    + requestDTOToEntity(dto: ScheduleRequestDTO): Schedule
    + entityToResponseDTO(schedule: Schedule): ScheduleResponseDTO
    + entitiesToResponseDTOs(schedules: List<Schedule>): List<ScheduleResponseDTO>
}

class ScheduleRequestDTO {
    - scheduleStartDate: LocalDate
    - scheduleEndDate: LocalDate
    - scheduleDescription: String
    - lotId: String
    - projectIdentifier: String
}

class ScheduleResponseDTO {
    - scheduleIdentifier: String
    - scheduleStartDate: LocalDate
    - scheduleEndDate: LocalDate
    - scheduleDescription: String
    - lotId: String
    - projectIdentifier: String
    - tasks: List<TaskSummaryDTO>
    - createdAt: LocalDateTime
    - updatedAt: LocalDateTime
}

class TaskSummaryDTO {
    - taskIdentifier: String
    - taskTitle: String
    - taskStatus: TaskStatus
    - taskPriority: TaskPriority
    - periodStart: LocalDate
    - periodEnd: LocalDate
}

class Schedule {
    - id: Integer
    - scheduleIdentifier: ScheduleIdentifier
    - scheduleStartDate: LocalDate
    - scheduleEndDate: LocalDate
    - scheduleDescription: String
    - lotId: String
    - project: Project
    - tasks: List<Task>
    - createdAt: LocalDateTime
    - updatedAt: LocalDateTime
}

class ScheduleIdentifier {
    - scheduleId: String
}

class Task {
    - id: Integer
    - taskIdentifier: TaskIdentifier
    - taskTitle: String
    - taskDescription: String
    - taskStatus: TaskStatus
    - taskPriority: TaskPriority
    - periodStart: LocalDate
    - periodEnd: LocalDate
    - estimatedHours: Integer
    - assignedToUserId: String
}

class TaskIdentifier {
    - taskId: String
}

enum TaskStatus {
    NOT_STARTED
    IN_PROGRESS
    COMPLETED
    BLOCKED
    CANCELLED
}

enum TaskPriority {
    LOW
    MEDIUM
    HIGH
    CRITICAL
}

interface ScheduleRepository {
    + save(schedule: Schedule): Schedule
    + findByScheduleIdentifier(scheduleIdentifier: String): Optional<Schedule>
    + findAll(): List<Schedule>
    + delete(schedule: Schedule): void
}

interface ProjectRepository {
    + findByProjectIdentifier(projectIdentifier: String): Optional<Project>
}

interface LotRepository {
    + findByLotIdentifier_LotId(lotId: Long): Optional<Lot>
}

class Project {
    - id: Integer
    - projectIdentifier: ProjectIdentifier
    - projectName: String
    - projectDescription: String
    - status: ProjectStatus
    - lots: List<Lot>
    - schedules: List<Schedule>
}

class Lot {
    - id: Integer
    - lotIdentifier: LotIdentifier
    - lotNumber: String
    - lotDescription: String
    - status: LotStatus
    - project: Project
}

ScheduleController --> ScheduleService
ScheduleServiceImpl --> ScheduleRepository
ScheduleServiceImpl --> ProjectRepository
ScheduleServiceImpl --> LotRepository
ScheduleServiceImpl --> ScheduleMapper

Schedule *-- ScheduleIdentifier
Schedule "1" *-- "0..*" Task
Schedule --> Project
Task *-- TaskIdentifier
Task --> TaskStatus
Task --> TaskPriority
Project "1" *-- "0..*" Lot
Project "1" *-- "0..*" Schedule

ScheduleRepository ..> Schedule
ProjectRepository ..> Project
LotRepository ..> Lot

ScheduleMapper ..> ScheduleRequestDTO
ScheduleMapper ..> ScheduleResponseDTO
ScheduleMapper ..> Schedule

ScheduleResponseDTO *-- TaskSummaryDTO

@enduml
